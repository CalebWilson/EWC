{"ast":null,"code":"var _jsxFileName = \"/home/caleb/passwordfix/EWC/front-end/src/Schedule.js\";\nimport React, { Component } from \"react\";\nimport Day from \"./Day\";\nimport NavArrow from \"./NavArrows\";\nimport WorkerDropdown from \"./WorkerDropdown\";\nimport Button from \"./Button\";\nimport ServiceModal from \"./ServiceModal\";\nimport Uplink from \"./Uplink\";\nimport \"./styles/Schedule.css\";\nimport \"./styles/buttons.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Schedule extends Component {\n  constructor(props) {\n    super(props);\n\n    this.get_schedule = () => {\n      Uplink.get_data(\"schedule/\" + this.props.match.params.week).then(data => {\n        this.setState(data);\n      });\n    };\n\n    this.get_date = day => {\n      let date = new Date(Date.now());\n      date.setDate(date.getDate() //today's date\n      + this.week * 7 //same day as today of current week\n      - (date.getDay() - 1) //monday of current week, 0-indexed\n      + day //given day of current week\n      );\n      return date;\n    };\n\n    this.get_month = () => {\n      let monday = this.get_date(0);\n      let friday = this.get_date(4);\n      let monday_month = new Intl.DateTimeFormat(\"en-US\", {\n        month: \"long\"\n      }).format(monday);\n      let friday_month = new Intl.DateTimeFormat(\"en-US\", {\n        month: \"long\"\n      }).format(friday); //this works\n\n      /*\n      \t\tif (monday_month != friday_month)\n      \t\t\tmonday_month += \" - \" + friday_month;\n      \n      \t\treturn monday_month;\n      */\n      //but this is cooler\n\n      return monday_month === friday_month ? monday_month : monday_month + \" - \" + friday_month;\n    };\n\n    this.edit_service = new_service => {\n      this.setState({\n        service: new_service,\n        mode: \"Edit\"\n      });\n    };\n\n    this.add_service = () => {\n      this.setState({\n        mode: \"Add\"\n      });\n    };\n\n    this.close_service = () => {\n      this.setState({\n        mode: null\n      });\n      this.get_schedule();\n    };\n\n    this.select_worker = worker_id => {\n      Uplink.get_data(\"schedule/\" + this.props.match.params.week + \"/\" + worker_id).then(data => {\n        this.setState(data);\n      });\n    };\n\n    this.generate = () => {\n      Uplink.get_data(\"generate/\" + this.week).then(data => {\n        this.setState(data);\n      });\n    };\n\n    this.state = {\n      data: {\n        week_letter: null,\n        schedule: []\n      },\n      mode: null\n    }; //get the week from the URL\n\n    this.week = parseInt(this.props.match.params.week);\n  }\n\n  //get main schedule from the back-end\n  componentDidMount() {\n    this.get_schedule();\n    document.addEventListener(\"keydown\", key_down => {\n      if (key_down.key === \"Escape\") this.close_service();\n    }, false);\n  }\n\n  render() {\n    if (this.state.error) {\n      return this.state.error;\n    }\n\n    let days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"schedule\",\n        onClickCapture: this.close_service,\n        onKeyDown: ev => {\n          alert(ev.key);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"schedule-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"month\",\n            children: this.get_month()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"schedule-top-right\",\n            children: [/*#__PURE__*/_jsxDEV(WorkerDropdown, {\n              blank: {\n                WorkerID: \"\",\n                WorkerName: \"MASTER\"\n              },\n              select_option: this.select_worker\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              label: \"Add Service\",\n              action: this.add_service\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"button-container\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                label: \"Generate\",\n                action: this.generate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(NavArrow, {\n          direction: \"up\",\n          href: \"/schedule/\" + (this.week - 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"schedule-table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"schedule-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"schedule-thead\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"schedule-th\",\n                  children: \"Notes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 8\n                }, this), days.map(day_name => /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"schedule-th\",\n                  children: day_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 10\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"schedule-body\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  height: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"schedule-td\",\n                  children: /*#__PURE__*/_jsxDEV(Day, {\n                    date: this.state.data.week_letter,\n                    work_day: \"Notes Content\",\n                    edit_service: this.edit_service\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 36\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 8\n                }, this), //work days\n                this.state.data.schedule.map((schedule_work_day, day) => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"schedule-td\",\n                  children: /*#__PURE__*/_jsxDEV(Day, {\n                    date: this.get_date(day).getDate(),\n                    day: day,\n                    work_day: schedule_work_day,\n                    edit_service: this.edit_service\n                  }, day, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 38\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 10\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 8\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"schedule-bottom\",\n          children: /*#__PURE__*/_jsxDEV(NavArrow, {\n            direction: \"down\",\n            href: \"/schedule/\" + (this.week + 1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.mode ? /*#__PURE__*/_jsxDEV(ServiceModal, {\n          service: this.state.service,\n          mode: this.state.mode,\n          close_service: this.close_service\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 7\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/caleb/passwordfix/EWC/front-end/src/Schedule.js"],"names":["React","Component","Day","NavArrow","WorkerDropdown","Button","ServiceModal","Uplink","Schedule","constructor","props","get_schedule","get_data","match","params","week","then","data","setState","get_date","day","date","Date","now","setDate","getDate","getDay","get_month","monday","friday","monday_month","Intl","DateTimeFormat","month","format","friday_month","edit_service","new_service","service","mode","add_service","close_service","select_worker","worker_id","generate","state","week_letter","schedule","parseInt","componentDidMount","document","addEventListener","key_down","key","render","error","days","ev","alert","WorkerID","WorkerName","map","day_name","height","schedule_work_day"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport Day            from \"./Day\";\nimport NavArrow       from \"./NavArrows\";\nimport WorkerDropdown from \"./WorkerDropdown\";\nimport Button         from \"./Button\";\nimport ServiceModal   from \"./ServiceModal\";\n\nimport Uplink from \"./Uplink\";\n\nimport \"./styles/Schedule.css\";\nimport \"./styles/buttons.css\";\n\nexport default class Schedule extends Component\n{\n\tconstructor (props)\n\t{\n\t\tsuper (props);\n\t\tthis.state =\n\t\t{\n\t\t\tdata: { week_letter: null, schedule: []},\n\t\t\tmode: null\n\t\t};\n\n\t\t//get the week from the URL\n\t\tthis.week = parseInt(this.props.match.params.week);\n\t}\n\n\tget_schedule = () =>\n\t{\n\t\tUplink.get_data (\"schedule/\" + this.props.match.params.week)\n\t\t.then ((data) =>\n\t\t{\n\t\t\tthis.setState (data);\n\t\t});\n\t}\n\n\t//date of the given day of the current week\n\tget_date = (day) =>\n\t{\n\t\tlet date = new Date (Date.now());\n\t\tdate.setDate\n\t\t(\n\t\t\tdate.getDate()        //today's date\n\t\t\t+ (this.week * 7)     //same day as today of current week\n\t\t\t- (date.getDay() - 1) //monday of current week, 0-indexed\n\t\t\t+ day                 //given day of current week\n\t\t);\n\n\t\treturn date;\n\t}\n\n\t//month(s) of the current week\n\tget_month = () =>\n\t{\n\t\tlet monday = this.get_date (0);\n\t\tlet friday = this.get_date (4);\n\n\t\tlet monday_month =\n\t\t\tnew Intl.DateTimeFormat (\"en-US\", {month: \"long\"}).format(monday)\n\t\t;\n\t\tlet friday_month =\n\t\t\tnew Intl.DateTimeFormat (\"en-US\", {month: \"long\"}).format(friday)\n\t\t;\n\n\t\t//this works\n/*\n\t\tif (monday_month != friday_month)\n\t\t\tmonday_month += \" - \" + friday_month;\n\n\t\treturn monday_month;\n*/\n\n\t\t//but this is cooler\n\t\treturn (monday_month === friday_month)\n\t\t?\n\t\t\t\tmonday_month\n\t\t\t: \n\t\t\t\tmonday_month + \" - \" + friday_month\n\t\t;\n\t}\n\n\t//show the given details of a job; to be passed as a prop to the Job component\n\tedit_service = (new_service) =>\n\t{\n\t\tthis.setState ({ service: new_service, mode: \"Edit\"});\n\t}\n\n\t//tell the back-end to add a scheduled job\n\tadd_service = () =>\n\t{\n\t\tthis.setState ({ mode: \"Add\" });\n\t}\n\n\t//hide job details; to be passed as a prop to the ServiceModal component\n\tclose_service = () =>\n\t{\n\t\tthis.setState ({ mode: null});\n\n\t\tthis.get_schedule();\n\t}\n\n\t//get worker-specific schedule from the back-end\n\tselect_worker = (worker_id) =>\n\t{\n\t\tUplink.get_data (\n\t\t\t\"schedule/\" + this.props.match.params.week + \"/\" + worker_id\n\t\t)\n\t\t.then ((data) =>\n\t\t{\n\t\t\tthis.setState (data);\n\t\t});\n\t}\n\n\t//tell the back-end to generate the current week's recurring jobs\n\tgenerate = () =>\n\t{\n\t\tUplink.get_data (\"generate/\" + this.week)\n\n\t\t.then ((data) =>\n\t\t{\n\t\t\tthis.setState (data);\n\t\t});\n\t}\n\n\t//get main schedule from the back-end\n\tcomponentDidMount()\n\t{\n\t\tthis.get_schedule();\n\n\t\tdocument.addEventListener\n\t\t(\n\t\t\t\"keydown\",\n\n\t\t\t(key_down) =>\n\t\t\t{\n\t\t\t\tif (key_down.key === \"Escape\")\n\t\t\t\t\tthis.close_service();\n\t\t\t},\n\n\t\t\tfalse\n\t\t);\n\t}\n\n\trender()\n\t{\n\t\tif (this.state.error)\n\t\t{\n\t\t\treturn this.state.error;\n\t\t}\n\n\t\tlet days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"];\n\t\t\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/* main schedule page */}\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"schedule\"\n\t\t\t\t\tonClickCapture={this.close_service}\n\t\t\t\t\tonKeyDown={(ev) =>\n\t\t\t\t\t{\n\t\t\t\t\t\talert(ev.key);\n\t\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t{/* top of the schedule */}\n\t\t\t\t\t<div className=\"schedule-top\">\n\n\t\t\t\t\t\t{/* month name */}\n\t\t\t\t\t\t<div className=\"month\">\n\t\t\t\t\t\t\t{this.get_month()}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"schedule-top-right\">\n\n\t\t\t\t\t\t\t<WorkerDropdown\n\t\t\t\t\t\t\t\tblank={{ WorkerID: \"\", WorkerName: \"MASTER\" }}\n\t\t\t\t\t\t\t\tselect_option={this.select_worker}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Button label=\"Add Service\" action={this.add_service} />\n\n\t\t\t\t\t\t\t<span className=\"button-container\">\n\t\t\t\t\t\t\t\t<Button label=\"Generate\" action={this.generate} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* previous week button */}\n\t\t\t\t\t<NavArrow\n\t\t\t\t\t\tdirection=\"up\"\n\t\t\t\t\t\thref={\"/schedule/\" + (this.week - 1)}\n\t\t\t\t\t/> \n\n\t\t\t\t\t{/* schedule table */}\n\t\t\t\t\t<div className=\"schedule-table-container\">\n\t\t\t\t\t<table className=\"schedule-table\">\n\t\t\t\t\t\t<thead className=\"schedule-thead\"><tr>\n\t\t\t\t\t\t\t<th className=\"schedule-th\">Notes</th>\n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdays.map ((day_name) =>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<th className=\"schedule-th\">{day_name}</th>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tr></thead>\n\n\t\t\t\t\t\t<tbody className=\"schedule-body\">\n\t\t\t\t\t\t\t<tr style={{height: \"100%\"}}>\n\t\t\t\t\t\t\t{/* notes for the week */}\n\t\t\t\t\t\t\t<td className=\"schedule-td\"><Day\n\t\t\t\t\t\t\t\tdate={this.state.data.week_letter}\n\t\t\t\t\t\t\t\twork_day=\"Notes Content\"\n\t\t\t\t\t\t\t\tedit_service={this.edit_service}\n\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//work days\n\t\t\t\t\t\t\t\tthis.state.data.schedule.map ((schedule_work_day, day) =>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<td className=\"schedule-td\"><Day\n\t\t\t\t\t\t\t\t\t\tdate={this.get_date(day).getDate()}\n\t\t\t\t\t\t\t\t\t\tday={day}\n\t\t\t\t\t\t\t\t\t\tkey={day}\n\t\t\t\t\t\t\t\t\t\twork_day={schedule_work_day}\n\t\t\t\t\t\t\t\t\t\tedit_service={this.edit_service}\n\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tr></tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"schedule-bottom\">\n\t\t\t\t\t\t{/* next week button */}\n\t\t\t\t\t\t<NavArrow\n\t\t\t\t\t\t\tdirection=\"down\"\n\t\t\t\t\t\t\thref={\"/schedule/\" + (this.week + 1)}\n\t\t\t\t\t\t/> \n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t{/* display service, if any */}\n\t\t\t\t<div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.mode\n\t\t\t\t\t?\n\t\t\t\t\t\t<ServiceModal\n\t\t\t\t\t\t\tservice={this.state.service}\n\t\t\t\t\t\t\tmode={this.state.mode}\n\t\t\t\t\t\t\tclose_service={this.close_service}\n\t\t\t\t\t\t/>\n\t\t\t\t\t:\n\t\t\t\t\t\t<div></div>\n\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}